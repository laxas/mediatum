<tal:block metal:define-macro="workflow_upload">
    <div tal:condition="python:pretext!=''" tal:content="raw pretext" class="pretext">TEXT</div>

    <p tal:condition="python:len(error)>0" tal:content="structure error" class="error"/>

    <form action="/mask" method="post">
        <input tal:attributes="value csrf" type="hidden" name="csrf_token">
        <span id="filelist" tal:content="raw filelist"/>
        <span id="filelistshort" tal:content="raw filelistshort"/>

        <input type="hidden" name="id" tal:attributes="value id">
        <input type="hidden" name="obj" tal:attributes="value obj">
    </form>

    <form action="/mask" method="post" enctype="multipart/form-data" style="padding:4px">
        <input tal:attributes="value csrf" type="hidden" name="csrf_token">
        <div tal:condition="python:not (len(node.getFiles())>0 and unicode(singlefile)=='1')">
            <h2 i18n:translate="workflow_add_file">TEXT</h2>
            <input type="file" name="file"/>
            <input i18n:attributes="value workflow_upload_button" type="submit" name="submit"/>
        </div>
        
        
        <div tal:condition="python:posttext!=''" tal:content="raw posttext" class="posttext">TEXT</div>

        <table>
            <tal:block tal:replace="raw python:buttons"/>
        </table>
    </form>
</tal:block>
